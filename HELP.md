# Desire Hunter v2.0 ヘルプ

## システム概要

**Desire Hunter** は、ユーザーの「欲求」を入力するだけで、世界中から最適な製品を自動的に発見するAI搭載の製品探索システムです。

### 主な特徴

- **自然言語入力**: 「集中力を高めたい」「肩こりを解消したい」など、日常的な言葉で検索可能
- **多言語検索**: 日本語と英語で並列検索し、グローバルな製品を発見
- **AI分析**: Gemini AIが欲求を分析し、最適な検索クエリを自動生成
- **自動スクレイピング**: Web上の製品情報を自動収集・抽出
- **適合度スコア**: 各製品の欲求への適合度を0-10で評価

---

## 使い方

### 1. 欲求を入力

検索フォームに、あなたの欲求や解決したい課題を入力します。

**入力例:**
- 「集中力を高めたい」
- 「肩こりを解消したい」
- 「在宅ワークを快適にしたい」
- 「睡眠の質を改善したい」
- 「料理の時間を短縮したい」

### 2. 製品を探す

「製品を探す」ボタンをクリックすると、検索が開始されます。

**処理時間**: 最大60秒（通常は20-40秒）

### 3. 結果を確認

検索結果には以下の情報が表示されます：

| 項目 | 説明 |
|------|------|
| 製品名 | 発見された製品の名前 |
| ブランド | 製造元・ブランド名 |
| 説明 | 製品の概要・特徴 |
| 価格 | 販売価格（取得できた場合） |
| 適合度 | 欲求への適合度スコア（0-10） |
| 評価理由 | AIによる適合度の根拠 |
| リンク | 公式サイト・Amazon・楽天へのリンク |

---

## システム構成

```
┌─────────────────────────────────────────────────────────────┐
│                    Desire Hunter v2.0                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐    ┌──────────────┐    ┌───────────────┐  │
│  │   Frontend  │───▶│   API Route  │───▶│  Gemini AI    │  │
│  │  (Next.js)  │    │  (/api/hunt) │    │  (分析・抽出)  │  │
│  └─────────────┘    └──────────────┘    └───────────────┘  │
│                            │                                │
│                            ▼                                │
│                     ┌──────────────┐                        │
│                     │  Serper API  │                        │
│                     │  (Google検索) │                        │
│                     └──────────────┘                        │
│                            │                                │
│                            ▼                                │
│                     ┌──────────────┐                        │
│                     │ Firecrawl    │                        │
│                     │ (スクレイピング)│                        │
│                     └──────────────┘                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 処理フロー

1. **欲求分析** (Gemini AI)
   - ユーザーの欲求を解析
   - 検索意図を特定
   - 多言語（日本語・英語）の検索クエリを生成

2. **Web検索** (Serper API)
   - 生成されたクエリでGoogle検索を実行
   - 最大2言語 × 各3件 = 6件の検索結果を取得

3. **スクレイピング** (Firecrawl)
   - 検索結果のURLからWebページをスクレイピング
   - 最大5件のURLを並列処理

4. **製品抽出** (Gemini AI)
   - スクレイピングしたコンテンツから製品情報を抽出
   - 欲求への適合度を0-10でスコアリング
   - 適合度5以上の製品のみを結果に含める

5. **結果表示**
   - 適合度順にソート
   - 上位5件を表示

---

## 技術仕様

### 使用技術

| カテゴリ | 技術 |
|---------|------|
| フロントエンド | Next.js 16, React, TypeScript, Tailwind CSS |
| バックエンド | Next.js API Routes (Serverless Functions) |
| AI | Google Gemini 2.0 Flash |
| 検索 | Serper API (Google Search) |
| スクレイピング | Firecrawl API |
| ホスティング | Vercel Pro |

### API エンドポイント

```
POST /api/hunt
Content-Type: application/json

{
  "desire": "集中力を高めたい"
}
```

### レスポンス形式

```json
{
  "desire": "集中力を高めたい",
  "products": [
    {
      "name": "製品名",
      "brand": "ブランド名",
      "description": "製品説明",
      "price": {
        "amount": 1000,
        "currency": "JPY",
        "formatted": "¥1,000"
      },
      "officialUrl": "https://...",
      "amazonUrl": "https://...",
      "rakutenUrl": "https://...",
      "relevanceScore": 8,
      "reasoning": "評価理由"
    }
  ],
  "totalSearched": 6,
  "totalScraped": 5,
  "errors": []
}
```

---

## 制限事項

### タイムアウト
- Vercel Proの制限により、最大実行時間は **60秒**
- 複雑な検索は時間がかかる場合があります

### 検索制限
- 1回の検索で最大 **6件** のソースを検索
- 最大 **5件** のURLをスクレイピング
- 結果は最大 **5件** の製品を表示

### 製品発見について
- 適合度スコア **5以上** の製品のみ表示
- スクレイピング先に製品情報がない場合、結果が0件になることがあります
- 検索クエリによっては、製品が見つからないこともあります

### 価格情報
- 価格が取得できない製品もあります
- 価格は取得時点のもので、変動する可能性があります

---

## トラブルシューティング

### 「該当する製品が見つかりませんでした」と表示される

**原因:**
- 検索クエリに対して適合度5以上の製品がなかった
- スクレイピング先に製品情報が含まれていなかった

**対処法:**
- 別の表現で検索してみてください
- より具体的な欲求を入力してみてください
- 例：「肩こり」→「デスクワークの肩こりを解消したい」

### 検索に時間がかかる

**原因:**
- 複数のAPIを順次呼び出しているため

**対処法:**
- 最大60秒お待ちください
- タイムアウトした場合は再度お試しください

### エラーが表示される

**原因:**
- サーバーエラーまたはAPI制限

**対処法:**
- しばらく待ってから再度お試しください
- 問題が続く場合は管理者に連絡してください

---

## 今後の改善予定

- [ ] 検索結果のキャッシュ機能
- [ ] 製品カテゴリでのフィルタリング
- [ ] 価格帯での絞り込み
- [ ] 検索履歴の保存
- [ ] お気に入り機能
- [ ] 多言語UI対応

---

## お問い合わせ

- **本番URL**: https://desire-hunter.vercel.app
- **バージョン**: v2.0
- **Powered by**: Gemini AI

---

*Desire Hunter v2.0 - 欲求から最適な製品を発見*
